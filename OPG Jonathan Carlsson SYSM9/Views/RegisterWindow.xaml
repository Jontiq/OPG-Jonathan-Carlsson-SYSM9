<Window x:Class="OPG_Jonathan_Carlsson_SYSM9.Views.RegisterWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:OPG_Jonathan_Carlsson_SYSM9.Views"
        mc:Ignorable="d"
        Title="RegisterWindow" Height="400" Width="400" ResizeMode="NoResize">
    <Grid>
        <Grid.RowDefinitions>

            <RowDefinition Height="*"/>
            <RowDefinition Height="1.5*"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="2*"/>
            <RowDefinition Height="1.2*"/>
        </Grid.RowDefinitions>
        <TextBlock Text="Register"
                   HorizontalAlignment="Center"
                   VerticalAlignment="Center"
                   FontSize="30"
                   FontWeight="Bold"/>
        <!--USERNAME-->
        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="2*"/>
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="*"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>
            <TextBlock Text="Username: "
                       HorizontalAlignment="Right"
                       VerticalAlignment="Center"
                       FontSize="15"/>
            <TextBox Grid.Column="1"
                     Text="{Binding UsernameInput,UpdateSourceTrigger=PropertyChanged}"
                     VerticalAlignment="Center"
                     FontSize="15"
                     Margin="5"/>
            <!--USERNAME IS TAKEN TEXTBLOCK-->
            <TextBlock Text="Username is not available!"
                       Grid.Row="1"
                       Grid.Column="1"
                       HorizontalAlignment="Center"
                       VerticalAlignment="Top"
                       Foreground="Red">
                <TextBlock.Style>
                    <Style TargetType="TextBlock">
                        <Setter Property="Visibility"
                                Value="Hidden"/>
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding UsernameTaken}" Value="True">
                                <Setter Property="Visibility" Value="Visible"/>
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </TextBlock.Style>
            </TextBlock>
        </Grid>
        <!--COUNTRY-->
        <Grid Grid.Row="2">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="2*"/>
            </Grid.ColumnDefinitions>
            <TextBlock Text="Country: "
                       HorizontalAlignment="Right"
                       VerticalAlignment="Center"
                       FontSize="15"/>
            <ComboBox Grid.Column="1"
                      ItemsSource="{Binding Countries}"
                      SelectedItem="{Binding SelectedCountry,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"
                      VerticalAlignment="Center"
                      FontSize="15"
                      Margin="5"/>
        </Grid>
        <!--PASSWORD-->
        <Grid Grid.Row="3">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="2*"/>
            </Grid.ColumnDefinitions>
            <TextBlock Text="Password: "
                       HorizontalAlignment="Right"
                       VerticalAlignment="Center"
                       FontSize="15"/>
            <PasswordBox Grid.Column="1"
                         x:Name="Pwd" 
                         PasswordChanged="Pwd_PasswordChanged"
                         VerticalAlignment="Center"
                         FontSize="15"
                         Margin="5"/>
        </Grid>
        <!--CONFIRM PASSWORD-->
        <Grid Grid.Row="4">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="2*"/>
            </Grid.ColumnDefinitions>
            <TextBlock Text="Confirm Password: "
                       HorizontalAlignment="Right"
                       VerticalAlignment="Center"
                       FontSize="15"/>
            <PasswordBox Grid.Column="1"
                         x:Name="PwdConfirm"
                         PasswordChanged="PwdConfirm_PasswordChanged"
                         VerticalAlignment="Center"
                         FontSize="15"
                         Margin="5"/>
        </Grid>
        <!--PASSWORD REQUIREMENTS-->
        <StackPanel Grid.Row="5"
                    VerticalAlignment="Center">
            <TextBlock Grid.Row="5"
                       Text="Password Requirements: "
                       HorizontalAlignment="Center"
                       VerticalAlignment="Center"
                       FontWeight="Bold"/>

            <TextBlock Grid.Row="5"
                       Text="Minimum 8 characters"
                       HorizontalAlignment="Center"
                       VerticalAlignment="Center">
                <!--Makes the text turn green if the requirement is fulfilled-->
                <TextBlock.Style>
                    <Style TargetType="TextBlock">
                        <Setter Property="Foreground"
                                Value="Red"/>
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding IsLengthValid}" Value="True">
                                <Setter Property="Foreground" Value="Green"/>
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </TextBlock.Style>
            </TextBlock>
            
            <TextBlock Grid.Row="5"
                       Text="At least one number and one special character"
                       HorizontalAlignment="Center"
                       VerticalAlignment="Center">
                <!--Makes the text turn green if the requirement is fulfilled-->
                <TextBlock.Style>
                    <Style TargetType="TextBlock">
                        <Setter Property="Foreground"
                                Value="Red"/>
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding HasNumberAndSpecial}" Value="True">
                                <Setter Property="Foreground" Value="Green"/>
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </TextBlock.Style>
            </TextBlock>
            <TextBlock Grid.Row="5"
                       Text="Both password fields must match"
                       HorizontalAlignment="Center"
                       VerticalAlignment="Center">
                <!--Makes the text turn green if the requirement is fulfilled-->
                <TextBlock.Style>
                    <Style TargetType="TextBlock">
                        <Setter Property="Foreground"
                                Value="Red"/>
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding PasswordsMatch}" Value="True">
                                <Setter Property="Foreground" Value="Green"/>
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </TextBlock.Style>
            </TextBlock>
        </StackPanel>

        <!--"CANCEL" AND "SAVE" BUTTON-->
        <Grid Grid.Row="6">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            <Button Content="Cancel"
                    Command="{Binding CancelCommand}"
                    Margin="15"/>
            <Button Content="Save"
                    Command="{Binding RegisterUserCommand}"
                    Grid.Column="1"
                    Margin="15"/>
        </Grid>
    </Grid>
</Window>
